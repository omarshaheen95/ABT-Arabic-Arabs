/* Mobile and Tablet Responsive Styles for Lesson Page */
@media (max-width: 768px) {
    /* Lesson Container */
    .lesson-container {
        padding: 12px !important;
    }

    /* Lesson Header */
    .lesson-header {
        flex-direction: column !important;
        gap: 16px !important;
        padding: 16px !important;
        align-items: stretch !important;
    }

    .lesson-title-wrapper {
        width: 100% !important;
    }

    .lesson-title {
        font-size: 24px !important;
        line-height: 1.3 !important;
        margin-bottom: 8px !important;
    }

    /* Breadcrumbs */
    .breadcrumbs {
        font-size: 13px !important;
        flex-wrap: wrap !important;
    }

    .breadcrumb-item {
        font-size: 13px !important;
    }

    /* Practice Button */
    .practice-btn {
        width: 100% !important;
        padding: 14px 24px !important;
        font-size: 15px !important;
        text-align: center !important;
        justify-content: center !important;
    }

    /* Tabs Container */
    .lesson-tabs-container {
        padding: 0 8px !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }

    .lesson-tabs {
        gap: 8px !important;
        min-width: min-content !important;
        justify-content: flex-start !important;
    }

    .lesson-tab {
        padding: 10px 16px !important;
        font-size: 14px !important;
        white-space: nowrap !important;
        min-width: fit-content !important;
    }

    /* Lesson Content */
    .lesson-content {
        padding: 16px 12px !important;
    }

    /* Section Headers */
    .section-header {
        flex-direction: column !important;
        text-align: center !important;
        gap: 12px !important;
        padding: 16px !important;
    }

    .section-icon {
        font-size: 40px !important;
    }

    .section-title {
        font-size: 20px !important;
        line-height: 1.4 !important;
    }

    .section-subtitle {
        font-size: 14px !important;
    }

    /* Audio Items */
    .audio-item {
        padding: 12px !important;
    }

    .audio-player-wrapper {
        flex-direction: column !important;
        gap: 12px !important;
        align-items: stretch !important;
    }

    .audio-player {
        width: 100% !important;
        max-width: 100% !important;
    }

    .audio-meta {
        padding: 0 !important;
        text-align: center !important;
    }

    .audio-title {
        font-size: 16px !important;
        line-height: 1.4 !important;
    }

    /* Video Container */
    .video-container {
        height: 250px !important;
        margin-bottom: 16px !important;
    }

    /* Answer Items */
    .answer-item {
        padding: 12px !important;
    }

    .answer-item-container {
        padding: 16px !important;
    }

    .answer-item-header {
        flex-direction: column !important;
        gap: 12px !important;
    }

    .answer-item-title {
        font-size: 18px !important;
        line-height: 1.4 !important;
    }

    .answer-item-subtitle {
        font-size: 14px !important;
    }

    /* Speak Answer Container */
    .speak-answer-btn {
        width: 80px !important;
        height: 80px !important;
    }

    .speak-answer-btn svg {
        width: 36px !important;
        height: 36px !important;
    }

    .speak-answer-label {
        font-size: 14px !important;
    }

    /* Recording Controls */
    .recording-controls-container {
        flex-wrap: wrap !important;
        gap: 12px !important;
        padding: 16px !important;
    }

    .recording-control-btn {
        width: 48px !important;
        height: 48px !important;
    }

    .recording-timer {
        font-size: 18px !important;
        min-width: 100% !important;
        order: -1 !important;
    }

    /* Write Answer Container */
    .write-answer-container {
        padding: 16px !important;
    }

    .answer-textarea {
        min-height: 150px !important;
        font-size: 15px !important;
        padding: 12px !important;
    }

    .word-count {
        font-size: 14px !important;
    }

    /* Upload Section */
    .upload-section {
        flex-direction: column !important;
        gap: 10px !important;
        align-items: stretch !important;
    }

    .upload-btn {
        width: 100% !important;
        justify-content: center !important;
        padding: 12px 20px !important;
        font-size: 14px !important;
    }

    .file-name {
        text-align: center !important;
        font-size: 13px !important;
    }

    /* Teacher Feedback */
    .teacher-feedback-container {
        padding: 12px !important;
    }

    .teacher-feedback-card {
        padding: 16px !important;
    }

    .feedback-title {
        font-size: 18px !important;
    }

    .feedback-message p {
        font-size: 14px !important;
        line-height: 1.6 !important;
    }

    /* Footer Buttons */
    .lesson-footer {
        flex-wrap: wrap !important;
        gap: 12px !important;
        padding: 16px 12px !important;
    }

    .prev-btn,
    .next-btn,
    #saveBtn {
        flex: 1 1 calc(50% - 6px) !important;
        min-width: 120px !important;
        padding: 12px 20px !important;
        font-size: 15px !important;
    }

    /* Form Status Container */
    .form-status-container {
        padding: 0 16px !important;
    }

    .form-status-container h2 {
        font-size: 16px !important;
    }

    .progress-bar-container {
        height: 25px !important;
    }

    .progress-percent {
        line-height: 25px !important;
        font-size: 14px !important;
    }
}

/* Small Mobile Devices */
@media (max-width: 480px) {
    /* Lesson Title */
    .lesson-title {
        font-size: 20px !important;
    }

    /* Section Headers */
    .section-icon {
        font-size: 36px !important;
    }

    .section-title {
        font-size: 18px !important;
    }

    .section-subtitle {
        font-size: 13px !important;
    }

    /* Audio Items */
    .audio-title {
        font-size: 14px !important;
    }

    /* Video Container */
    .video-container {
        height: 200px !important;
    }

    /* Answer Items */
    .answer-item-title {
        font-size: 16px !important;
    }

    .answer-item-subtitle {
        font-size: 13px !important;
    }

    /* Speak Answer Button */
    .speak-answer-btn {
        width: 70px !important;
        height: 70px !important;
    }

    .speak-answer-btn svg {
        width: 32px !important;
        height: 32px !important;
    }

    /* Recording Controls */
    .recording-control-btn {
        width: 44px !important;
        height: 44px !important;
    }

    .recording-timer {
        font-size: 16px !important;
    }

    /* Textarea */
    .answer-textarea {
        min-height: 120px !important;
        font-size: 14px !important;
    }

    /* Footer Buttons */
    .prev-btn,
    .next-btn,
    #saveBtn {
        flex: 1 1 100% !important;
        font-size: 14px !important;
    }

    /* Tabs */
    .lesson-tab {
        padding: 10px 14px !important;
        font-size: 13px !important;
    }
}

/* Additional Overflow and Width Fixes */
@media (max-width: 768px) {
    /* Base box-sizing fix for all elements */
    .lesson-container *,
    .lesson-tabs-wrapper *,
    .audio-item *,
    .answer-item * {
        box-sizing: border-box !important;
    }

    /* Container overflow fixes */
    .lesson-container {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        padding-left: 16px !important;
        padding-right: 16px !important;
    }

    .lesson-tabs-wrapper,
    .section-content,
    .listen-section,
    .watch-section,
    .answer-section {
        width: 100% !important;
        max-width: 100% !important;
        overflow: hidden !important;
    }

    /* Audio player width and overflow fixes */
    .audio-list {
        width: 100% !important;
        max-width: 100% !important;
        padding: 0 !important;
    }

    .audio-item {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        padding-left: 16px !important;
        padding-right: 16px !important;
        overflow: hidden !important;
    }

    .audio-player-wrapper {
        width: 100% !important;
        max-width: 100% !important;
        overflow: hidden !important;
    }

    .audio-player,
    .audio-player > div,
    .audio-player > *,
    .teacher-audio-player,
    .student-audio-player-corrected,
    .student-audio-player-existing,
    .green-audio-player {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        box-sizing: border-box !important;
        overflow: hidden !important;
    }

    .audio-player audio {
        width: 100% !important;
        max-width: 100% !important;
    }

    /* Improve container padding and spacing */
    .section-header {
        padding: 20px 16px !important;
    }

    .answer-item-container,
    .write-answer-container {
        padding: 20px 16px !important;
        width: 100% !important;
        box-sizing: border-box !important;
    }

    .teacher-feedback-container {
        padding: 16px !important;
        width: 100% !important;
        box-sizing: border-box !important;
    }

    .teacher-feedback-card {
        padding: 20px !important;
        box-sizing: border-box !important;
    }

    /* Improve text sizing */
    .lesson-title {
        font-size: 22px !important;
        line-height: 1.5 !important;
    }

    .section-title {
        font-size: 20px !important;
        line-height: 1.5 !important;
    }

    .section-subtitle {
        font-size: 15px !important;
    }

    .audio-title {
        font-size: 17px !important;
        line-height: 1.5 !important;
    }

    .answer-item-title {
        font-size: 18px !important;
        line-height: 1.5 !important;
    }

    .answer-item-subtitle {
        font-size: 15px !important;
    }

    /* Improve button and textarea sizing */
    .practice-btn {
        padding: 16px 24px !important;
        font-size: 16px !important;
    }

    .answer-textarea {
        min-height: 180px !important;
        font-size: 16px !important;
        padding: 14px !important;
    }

    .upload-btn {
        padding: 14px 20px !important;
        font-size: 15px !important;
    }

    .prev-btn,
    .next-btn,
    #saveBtn {
        padding: 14px 20px !important;
        font-size: 16px !important;
        min-width: 140px !important;
    }

    /* Recording controls improvements */
    .speak-answer-btn {
        width: 90px !important;
        height: 90px !important;
    }

    .speak-answer-btn svg {
        width: 40px !important;
        height: 40px !important;
    }

    .recording-control-btn {
        width: 52px !important;
        height: 52px !important;
    }

    .recording-timer {
        font-size: 20px !important;
        text-align: center !important;
    }
}

/* Additional fixes for small mobile */
@media (max-width: 480px) {
    .lesson-container {
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    .audio-item {
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    .answer-item-container,
    .write-answer-container {
        padding: 16px 12px !important;
    }
}

/* Disable 41px margins on mobile devices */
@media (max-width: 768px) {
    /* Remove excessive horizontal margins */
    .read-text-container {
        margin: 0 16px !important;
        padding: 20px 16px !important;
    }

    .answer-item {
        margin: 0 !important;
        margin-bottom: 20px !important;
    }

    .teacher-feedback-container {
        padding: 0 !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }

    /* Also fix section content if it has similar margins */
    .section-content {
        padding: 16px !important;
        margin: 0 !important;
    }

    /* Fix any other elements with 41px spacing */
    .lesson-content > * {
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
}

@media (max-width: 480px) {
    .read-text-container {
        margin: 0 12px !important;
        padding: 16px 12px !important;
    }

    .answer-item {
        margin-bottom: 16px !important;
    }

    .section-content {
        padding: 12px !important;
    }
}
